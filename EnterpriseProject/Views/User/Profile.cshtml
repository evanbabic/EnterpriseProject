@model EnterpriseProject.Entities.Profile

<style>
	.center
	{
		max-width: fit-content;
		margin-inline: auto;
		text-align: center;
	}
</style>

@{
	ViewData["Title"] = (Model != null ? Model.User.UserName + "'s " : "") + "Profile";
}

@if (Model != null)
{
	<div class="container-fluid d-flex flex-column">

		<!--BANNER-->
		<div class="bg-primary text-white text-center py-5" style="height: 200px;">
		</div>

		<div class="d-flex justify-content-center align-items-center flex-column py-5" style="flex: 1;">
			<div class="text-center mb-4">
				<img src="https://via.placeholder.com/150" alt="profile picture" class="rounded-circle img-fluid" style="width: 150px; height: 150px; object-fit: cover; margin-top: -100px;" />
				<h3 class="mt-3">@Model.User.UserName</h3>
				<p class="card-text">
					@Model.AboutMe
				</p>
			</div>
		</div>
	</div>

	<div class="container text-center" style="margin-top: -20px;">
		@if (Model.User.Resume != null)
		{
			<form asp-action="ViewResume" asp-controller="Resume" method="get">
				<input type="hidden" name="resumeId" value="@Model.User.Resume.ResumeId" />

				<button type="submit" class="btn btn-primary">View Resume</button>
			</form>
		}
		else
		{
			<p>This user has not uploaded a resume.</p>
		}

		@if (ViewBag.IsMyProfile)
		{
		<form asp-action="UploadResume" asp-controller="Resume" method="post" enctype="multipart/form-data">
			<input type="hidden" name="userId" value="@Model.User.UserId" />
			<div class="form-group">
				<label for="resumeFile">Upload your Resume (PDF only)</label>
				<input type="file" class="form-control" name="resumeFile" accept=".pdf" required />
			</div>
			<button type="submit" class="btn btn-success resume-button">Upload Resume</button>
		</form>
		}
	</div>

	<div class="container comment-section">
		<h4 class="text-center">Comments</h4>

		@if (Model.Comments != null && Model.Comments.Any())
		{
			@foreach (var comment in Model.Comments)
			{
				<div style="margin-bottom: 20px;">
					<div class="card-body">
						<div style="font-weight: bold; margin-bottom: 5px;">
							<p>Comment From: <strong>@comment.User.UserName</strong> on <i>@comment.CreatedAt.ToShortDateString()</i></p>
						</div>

						<div style="font-style: italic; margin-top: 10px;">
							@comment.Content
						</div>
					</div>
				</div>
			}
		}
	</div>
}
else
{
	<p>Invalid User ID.</p>
}